#http://cran.r-project.org/web/packages/IBrokers/IBrokers.pdf
#http://cran.r-project.org/web/packages/IBrokers/vignettes/RealTime.pdf
#http://cran.r-project.org/web/packages/IBrokers/vignettes/IBrokers.pdf
#http://artax.karlin.mff.cuni.cz/r-help/library/IBrokers/html/00Index.html
#https://www.rmetrics.org/files/Meielisalp2009/Presentations/Ryan.pdf
#http://interactivebrokers.github.io/#
#install.packages("twsInstrument", repos="http://R-Forge.R-project.org")
#install.packages("qmao", repos="http://R-Forge.R-project.org")
#TTR,quantmod,FinancialInstrument
http://rpackages.ianhowson.com/rforge/twsInstrument/man/twsInstrument-package.html
install.packages("IBrokers")
tws <- twsConnect()
id <- reqIds(tws)
reqCurrentTime(tws)# Request The Current TWS Time
isConnected(tws)
serverVersion(tws)
twsConnectionTime(tws)
contract <- twsEquity('RARE')
reqContractDetails(tws,contract)
# retrieve all QQQQ contracts as a list
reqContractDetails(tws, twsOption(local="", right="", symbol="RARE"))
# retrieve only calls
reqContractDetails(tws, twsOption(local="", right="C", symbol="RARE"))
# retrieve only puts
reqContractDetails(tws, twsOption(local="", right="P", symbol="RARE"))
reqMktData(tws,contract)
reqHistory(tws,contract,"1 min")
reqHistoricalData(tws,twsEquity('AAPL'))
reqHistoricalData(tws,twsIndex('NDX',"NASDAQ"))
mean(reqHistoricalData(tws,twsEquity('AAPL'))[,1])
reqRealTimeBars(tws,twsEquity('AAPL'))
reqRealTimeBars(tws,contract)
fh <- file('d://out.dat',open='a')
reqMktData(tws, contract, file=fh)
Sys.sleep(10)
reqHistory(tws, Contract=contract)
reqHistoricalData(tws,contract)
reqMktDepth(tws,contract)
twsSTK(contract)
twsDisconnect(tws)
reqMktData(tws, twsFUT("NDM5","GLOBEX","201505"))
reqMktData(tws, twsFuture("NDM5","GLOBEX","201505"))
reqMktData(tws,
 Contract = twsSTK("RARE"),
 eventWrapper = eWrapper(TRUE),
 timeStamp=NULL)
reqMktData(tws, twsEquity("SBUX"), CALLBACK=NULL, file="D://SBUX.dat")
twsp <- twsConnect(filename="SBUX.dat")
To playback the saved data, call reqMktData again:
reqMktData(twsp)
reqMktData(twsp, playback=0)
twsPortfolioValue(reqAccountUpdates(tws))
reqMktDepth(tws, twsEquity("SBUX"), CALLBACK=NULL, file="D://SBUX.dat")
reqRealTimeBars(tws, twsEquity("SBUX"), C ALLBACK=NULL, file="D://SBUX.dat")
#NDX150508P04240000-SMART-OPT-USD
opt <- twsOption("NDX",expiry="150508", strike="4240", right="P")
reqContractDetails(tws, twsOption(local="", right="P", symbol="INTU"))
twsOption("BFR","150717","16","P")
reqMktData(tws,twsOption("BFR","150717","16","P"))
reqHistoricalData(tws,twsOption("BFR","150717","16","P"))
reqHistoricalData(tws,twsOption("INTU","150717","105","P"))
